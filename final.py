import random
import discord
import openai
from discord.ext import commands
from discord.ui import Select, View
from discord import app_commands
import sqlite3
from datetime import datetime
import datetime
from collections import Counter
import logging
import asyncio
import os

# è¨­ç½®æ—¥èªŒ
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# è¨­å®šæ©Ÿå™¨äººçš„æ¬Šé™
intents = discord.Intents.default()
intents.message_content = True
bot = commands.Bot(command_prefix="!", intents=intents)

# è¨­å®š OpenAI API é‡‘é‘°
openai.api_key = '5fYbhQWQp6nZWpKF76OKRQLRycykW7oVJogrk8SyMkPr5prZ16swJQQJ99AKACfhMk5XJ3w3AAAAACOGRo7x'
openai.api_base = 'https://c1121-m3su23q5-swedencentral.cognitiveservices.azure.com/'
openai.api_type = "azure"
openai.api_version = "2024-08-01-preview"

DEPLOYMENT_NAME = "bot"

# Discord æ©Ÿå™¨äºº Token
DISCORD_TOKEN = os.getenv('DISCORD_TOKEN')

# åˆ†æ®µè¨Šæ¯è™•ç†å‡½æ•¸
def split_message(message, chunk_size=2000):
    """å°‡é•·è¨Šæ¯åˆ†æ®µï¼Œä»¥å…è¶…å‡º Discord å–®æ¬¡è¨Šæ¯é™åˆ¶(2000 å­—ç¬¦)"""
    if len(message) <= chunk_size: # å¦‚æœè¨Šæ¯é•·åº¦å°æ–¼ç­‰æ–¼ 2000 å­—ç¬¦ï¼Œç›´æ¥è¿”å›
        return [message]
    return [message[i:i + chunk_size] for i in range(0, len(message), chunk_size)] # åˆ†æ®µ


# åˆå§‹åŒ–è³‡æ–™åº«
conn = sqlite3.connect('emotion_calendar.db')
c = conn.cursor()
c.execute('''
    CREATE TABLE IF NOT EXISTS emotions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id TEXT,
        emotion TEXT,
        timestamp DATETIME
    )
''')
conn.commit()

# é‡æ–°æ’åˆ—æƒ…ç·’è¨˜éŒ„ ID
def reorder_emotions(user_id):
    c.execute('SELECT id FROM emotions WHERE user_id = ? ORDER BY timestamp', (user_id,))
    records = c.fetchall()
    
    # é‡æ–°æ’åº ID
    for new_id, (old_id,) in enumerate(records, start=1):
        c.execute('UPDATE emotions SET id = ? WHERE id = ?', (new_id, old_id))
    conn.commit()

class EmotionSelect(Select):
    def __init__(self):
        options = [
            discord.SelectOption(label="é–‹å¿ƒ", value="é–‹å¿ƒ"),
            discord.SelectOption(label="å¹¸ç¦", value="å¹¸ç¦"),
            discord.SelectOption(label="èˆˆå¥®", value="èˆˆå¥®"),
            discord.SelectOption(label="æœŸå¾…", value="æœŸå¾…"),
            discord.SelectOption(label="é›£é", value="é›£é"),
            discord.SelectOption(label="ç”Ÿæ°£", value="ç”Ÿæ°£"),
            discord.SelectOption(label="ç„¦æ…®", value="ç„¦æ…®"),
            discord.SelectOption(label="ç–²å€¦", value="ç–²å€¦"),
            discord.SelectOption(label="å…¶ä»–", value="å…¶ä»–"),
        ]
        super().__init__(placeholder="é¸æ“‡ä½ çš„æƒ…ç·’", min_values=1, max_values=1, options=options)

    async def callback(self, interaction: discord.Interaction):
        emotion = self.values[0]
        if emotion == "å…¶ä»–":
            await interaction.response.send_message("è«‹è¼¸å…¥ä½ çš„æƒ…ç·’ï¼š")
            def check(msg):
                return msg.author == interaction.user and msg.channel == interaction.channel
            msg = await bot.wait_for('message', check=check)
            emotion = msg.content
        
        # è¨˜éŒ„æƒ…ç·’
        await self.record_emotion(interaction.user, emotion, interaction)

    async def record_emotion(self, user, emotion, interaction):
        user_id = str(user.id)
        timestamp = datetime.datetime.now().strftime('%Y-%m-%d %H:%M')  # åªä¿ç•™å°æ™‚å’Œåˆ†é˜
        c.execute('INSERT INTO emotions (user_id, emotion, timestamp) VALUES (?, ?, ?)', (user_id, emotion, timestamp))
        conn.commit()

        # é‡æ–°æ’åˆ— ID
        reorder_emotions(user_id)
        
        if not interaction.response.is_done():
            await interaction.response.send_message(f'æƒ…ç·’ "{emotion}" å·²è¨˜éŒ„æ–¼ {timestamp}!')
        else:
            await interaction.followup.send(f'æƒ…ç·’ "{emotion}" å·²è¨˜éŒ„æ–¼ {timestamp}!')


# å•é¡Œåº«å’Œå›æ‡‰
questions = [
    {"question": "åœ¨æˆ€æ„›ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯ä»€éº¼?", "answers": ["ä¿¡ä»»", "èª å¯¦", "æºé€š", "æ„›"]},
    {"question": "ä½ èªç‚ºç´„æœƒæ™‚ï¼Œæ‡‰è©²åšä»€éº¼æ´»å‹•?", "answers": ["çœ‹é›»å½±", "åƒæ™šé¤", "å»æ•£æ­¥", "ç©éŠæˆ²"]},
    {"question": "å¦‚æœä½ å’Œä¼´ä¾¶åµæ¶äº†ï¼Œæœƒæ€éº¼åš?", "answers": ["å†·éœä¸‹ä¾†", "æ‰¾æœ‹å‹å‚¾è¨´", "èˆ‡å°æ–¹æºé€š", "æš«æ™‚åˆ†é–‹"]},
    {"question": "ä½ è¦ºå¾—åœ¨æˆ€æ„›ä¸­ï¼Œæœ€æµªæ¼«çš„äº‹æƒ…æ˜¯ä»€éº¼?", "answers": ["ä¸€èµ·æ—…è¡Œ", "é€èŠ±", "å¯«æƒ…æ›¸", "åšæ‰‹å·¥ç¦®ç‰©"]},
    {"question": "é è·é›¢æˆ€æ„›æ™‚ï¼Œä½ æœ€æ“”å¿ƒçš„æ˜¯ä»€éº¼?", "answers": ["ä¿¡ä»»å•é¡Œ", "ç¼ºå°‘é™ªä¼´", "æºé€šå›°é›£", "ç”Ÿæ´»ç¯€å¥ä¸åŒ"]},
    {"question": "å¦‚æœä½ æ„›ä¸Šäº†ä¸è©²æ„›çš„äººï¼Œä½ æœƒæ€éº¼è¾¦?", "answers": ["æ”¾æ£„", "å˜—è©¦èˆ‡å°æ–¹åœ¨ä¸€èµ·", "ä¿æŒè·é›¢", "å°‹æ±‚æœ‹å‹å¹«åŠ©"]},
    {"question": "ä½ èªç‚ºæˆ€æ„›ä¸­çš„çˆ­åµè©²å¦‚ä½•è™•ç†?", "answers": ["å†·éœä¸‹ä¾†å†è¨è«–", "ç«‹åˆ»é“æ­‰", "æ‰¾ç¬¬ä¸‰æ–¹èª¿è§£", "å¿½ç•¥çˆ­åŸ·"]},
    {"question": "ç´„æœƒæ™‚æœ€ç†æƒ³çš„æ™‚é–“é•·åº¦æ˜¯å¤šä¹…?", "answers": ["1-2å°æ™‚", "3-4å°æ™‚", "æ•´å€‹ä¸‹åˆ", "æ•´å€‹æ™šä¸Š"]},
    {"question": "ä½ æœƒé¡˜æ„èˆ‡ä¼´ä¾¶åˆ†äº«ä½ çš„ç§˜å¯†å—?", "answers": ["æ˜¯", "ä¸ç¢ºå®š", "ä¸æœƒ", "å–æ±ºæ–¼å°æ–¹"]},
    {"question": "å¦‚æœä½ å’Œä¼´ä¾¶çš„æ„›æƒ…å‡ºç¾å±æ©Ÿï¼Œä½ æœƒæ€éº¼åš?", "answers": ["æºé€š", "å°‹æ±‚å¤–éƒ¨å¹«åŠ©", "å†·éœä¸€ä¸‹", "æ”¾æ‰‹"]},
    {"question": "ä½ è¦ºå¾—æœ€å¥½çš„ç´„æœƒåœ°é»æ˜¯å“ªè£¡?", "answers": ["æµ·é‚Š", "å’–å•¡é¤¨", "å…¬åœ’", "åšç‰©é¤¨"]},
    {"question": "å¦‚æœä½ æ„›ä¸Šä¸€å€‹å¾ˆå¿™ç¢Œçš„äººï¼Œä½ æœƒæ€éº¼åš?", "answers": ["ç†è§£ä¸¦æ”¯æŒ", "è‡ªå·±ä¹Ÿå¿™èµ·ä¾†", "è©¦è‘—å¤šè¦‹é¢", "å°‹æ±‚æ›´å¤šçš„é—œå¿ƒ"]},
    {"question": "å¦‚ä½•çŸ¥é“å°æ–¹æ˜¯å¦æ„›ä½ ?", "answers": ["ä»–æœƒé—œå¿ƒä½ çš„ä¸€åˆ‡", "ä»–æœƒä¸æ–·åŠªåŠ›ç¶­æŒé—œä¿‚", "ä»–æœƒå°Šé‡ä½ çš„æ±ºå®š", "ä»–æœƒé¡˜æ„èˆ‡ä½ åˆ†äº«æœªä¾†"]},
    {"question": "å¦‚æœå°æ–¹å°ä½ çš„æˆ€æ„›æ–¹å¼ä¸æ»¿æ„ï¼Œä½ æœƒæ€éº¼è¾¦?", "answers": ["ç†è§£ä¸¦æ”¹è®Š", "è¨è«–ä¸¦å¦¥å”", "ä¸æ”¹è®Šï¼Œå …æŒè‡ªå·±çš„æ–¹å¼", "æ”¾æ‰‹è®“ä»–é¸æ“‡"]},
    {"question": "åœ¨æˆ€æ„›ä¸­ï¼Œæ€æ¨£æ‰èƒ½å¢é€²è¦ªå¯†æ„Ÿ?", "answers": ["å¤šèŠ±æ™‚é–“ç›¸è™•", "åˆ†äº«æ›´å¤šæ„Ÿå—", "å…±åŒåšä¸€äº›äº‹æƒ…", "å½¼æ­¤æ”¯æŒ"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶é‡åˆ°å›°é›£ï¼Œä½ æœƒæ€éº¼åš?", "answers": ["çµ¦äºˆæ”¯æŒ", "é™ªä¼´ä»–åº¦éé›£é—œ", "å¹«åŠ©ä»–æ‰¾åˆ°è§£æ±ºè¾¦æ³•", "è®“ä»–è‡ªå·±è§£æ±º"]},
    {"question": "ä½ æœ€å–œæ­¡å’Œä¼´ä¾¶ä¸€èµ·åšçš„äº‹æƒ…æ˜¯?", "answers": ["æ—…è¡Œ", "åƒé£¯", "èŠå¤©", "é‹å‹•"]},
    {"question": "ä½ è¦ºå¾—æˆ€æ„›ä¸­æœ€å›°é›£çš„éƒ¨åˆ†æ˜¯?", "answers": ["ä¿æŒä¿¡ä»»", "ç¶­æŒæ¿€æƒ…", "è™•ç†è¡çª", "ç†è§£å½¼æ­¤"]},
    {"question": "ä½ èªç‚ºä»€éº¼æœ€èƒ½å¢å¼·ä¼´ä¾¶é–“çš„è¦ªå¯†æ„Ÿ?", "answers": ["æ›´å¤šç›¸è™•æ™‚é–“", "åˆ†äº«å…§å¿ƒæƒ³æ³•", "å…±åŒç¶“æ­·æŒ‘æˆ°", "æ”¯æŒå½¼æ­¤çš„ç›®æ¨™"]},
    {"question": "ä½ è¦ºå¾—ä»€éº¼æƒ…æ³ä¸‹æœ€èƒ½æ¿€ç™¼æ¿€æƒ…?", "answers": ["è£½é€ æµªæ¼«é©šå–œ", "æ—…è¡Œä¸­çš„å†’éšª", "æƒ…æ„Ÿçš„å¦éœ²", "é•·æ™‚é–“çš„åˆ†åˆ¥å¾Œé‡é€¢"]},
    {"question": "ä½ èªç‚ºä»€éº¼æ¨£çš„è¡Œç‚ºèƒ½å¤ å±•ç¾æ‰¿è«¾?", "answers": ["å…¬é–‹è¡¨é”æ„›æ„", "ç‚ºå°æ–¹åšé•·æœŸè¦åŠƒ", "å …æŒé™ªä¼´", "å°Šé‡å°æ–¹çš„é¸æ“‡"]},
    {"question": "å¦‚æœè¦ªå¯†æ„Ÿæ¸›å°‘ï¼Œä½ æœƒæ€éº¼è¾¦?", "answers": ["å¢åŠ ç›¸è™•æ™‚é–“", "å¦èª è¨è«–å•é¡Œ", "è£½é€ æ›´å¤šå…±åŒç¶“æ­·", "é‡æ–°å®šç¾©é—œä¿‚ç›®æ¨™"]},
    {"question": "ä½ èªç‚ºæ„›æƒ…ä¸­æœ€èƒ½ä¿æŒæ¿€æƒ…çš„æ˜¯ä»€éº¼?", "answers": ["å˜—è©¦æ–°é®®äº‹ç‰©", "ä¸æ–·è£½é€ é©šå–œ", "å½¼æ­¤ä¿æŒå¸å¼•åŠ›", "ç‡Ÿé€ æµªæ¼«æ°›åœ"]},
    {"question": "ä½ èªç‚ºæ‰¿è«¾çš„åŸºçŸ³æ˜¯ä»€éº¼?", "answers": ["å¿ èª ", "ä¿¡ä»»", "å…±åŒçš„æœªä¾†é¡˜æ™¯", "ç„¡æ¢ä»¶çš„æ”¯æŒ"]},
    {"question": "ä½ è¦ºå¾—æ¿€æƒ…æ¶ˆé€€å¾Œï¼Œæ„›æƒ…æ˜¯å¦èƒ½ç¶­æŒ?", "answers": ["å¯ä»¥ï¼Œåªè¦æœ‰è¦ªå¯†å’Œæ‰¿è«¾", "éœ€è¦é‡æ–°å°‹æ‰¾æ¿€æƒ…", "ä¸ä¸€å®š", "å–æ±ºæ–¼é›™æ–¹çš„åŠªåŠ›"]},
    {"question": "ä½ èªç‚ºä»€éº¼æ¨£çš„æ´»å‹•æœ€èƒ½å¢é€²è¦ªå¯†æ„Ÿ?", "answers": ["æ·±å…¥çš„è«‡è©±", "ä¸€èµ·å®Œæˆç›®æ¨™", "è£½é€ å°ˆå±¬å›æ†¶", "å…±åº¦è¼•é¬†æ™‚å…‰"]},
    {"question": "ç•¶å°æ–¹å°æ‰¿è«¾çŒ¶è±«æ™‚ï¼Œä½ æœƒæ€éº¼åš?", "answers": ["çµ¦å°æ–¹æ™‚é–“", "å¦èª é¢å°å•é¡Œ", "ç¢ºèªå½¼æ­¤éœ€æ±‚", "é‡æ–°è©•ä¼°é—œä¿‚"]},
    {"question": "ä½ è¦ºå¾—æ¿€æƒ…åœ¨æ„›æƒ…ä¸­æ˜¯å¦å¿…è¦?", "answers": ["éå¸¸å¿…è¦", "æœ‰æ™‚å€™å¿…è¦", "ä¸æ˜¯å¿…éœ€çš„", "å¯ä»¥è¢«å…¶ä»–å› ç´ å–ä»£"]},
    {"question": "ç•¶æ‰¿è«¾å—åˆ°æŒ‘æˆ°æ™‚ï¼Œä½ æœƒæ€éº¼æ‡‰å°?", "answers": ["å …å®ˆè‡ªå·±çš„æ±ºå®š", "èˆ‡ä¼´ä¾¶æºé€š", "é‡æ–°è€ƒæ…®é—œä¿‚", "å°‹æ±‚å¤–éƒ¨å¹«åŠ©"]},
    {"question": "ä½ è¦ºå¾—è¦ªå¯†æ„Ÿæ‡‰è©²å¦‚ä½•æŒçºŒå¢å¼·?", "answers": ["åˆ†äº«å…§å¿ƒæ„Ÿå—", "å­¸ç¿’å°æ–¹çš„èˆˆè¶£", "å°Šé‡ä¸¦ç†è§£å½¼æ­¤", "å¤šå‰µé€ å…±åŒç¶“æ­·"]},
    {"question": "åœ¨æ„›æƒ…ä¸­ï¼Œä»€éº¼æœ€èƒ½è±¡å¾µæ¿€æƒ…?", "answers": ["ç†±çƒˆçš„æ“æŠ±", "æ·±æƒ…çš„çœ¼ç¥", "é©šå–œçš„å‘Šç™½", "æ—…è¡Œä¸­çš„åˆºæ¿€"]},
    {"question": "ä½ èªç‚ºæ‰¿è«¾æ‡‰è©²å¦‚ä½•è¡¨ç¾å‡ºä¾†?", "answers": ["è¦åŠƒæœªä¾†", "éµå®ˆç´„å®š", "å°å½¼æ­¤å¿ èª ", "é¡˜æ„ç‚ºå°æ–¹çŠ§ç‰²"]},
    {"question": "ä½ è¦ºå¾—ç•¶è¦ªå¯†æ„Ÿæ¸›å¼±æ™‚ï¼Œå¦‚ä½•æ”¹å–„?", "answers": ["æ›´å¤šæºé€š", "è£½é€ æµªæ¼«æ™‚åˆ»", "å°‹æ‰¾å…±åŒèˆˆè¶£", "èŠ±æ›´å¤šæ™‚é–“é™ªä¼´"]},
    {"question": "æ¿€æƒ…æ˜¯å¦æœƒéš¨æ™‚é–“æ¸›å¼±?", "answers": ["æ˜¯çš„ï¼Œä½†å¯ä»¥åŠªåŠ›ä¿æŒ", "ä¸ä¸€å®š", "å®Œå…¨å–æ±ºæ–¼é›™æ–¹", "éœ€è¦ç‰¹æ„ç¶­è­·"]},
    {"question": "ä½ è¦ºå¾—æ‰¿è«¾èƒ½å¦å½Œè£œè¦ªå¯†å’Œæ¿€æƒ…çš„ä¸è¶³?", "answers": ["èƒ½", "ä¸èƒ½", "éƒ¨åˆ†èƒ½", "å–æ±ºæ–¼æƒ…æ³"]},
    {"question": "å¦‚æœå°æ–¹è¡¨é”å°æ¿€æƒ…çš„éœ€æ±‚ï¼Œä½ æœƒæ€éº¼å›æ‡‰?", "answers": ["åŠªåŠ›å‰µé€ æ¿€æƒ…", "èˆ‡å°æ–¹æºé€šéœ€æ±‚", "å°ˆæ³¨æ–¼è¦ªå¯†æ„Ÿ", "å°‹æ±‚å¹³è¡¡"]},
    {"question": "ä½ èªç‚ºä»€éº¼è¡Œç‚ºæœƒæå®³æ‰¿è«¾?", "answers": ["æ¬ºé¨™", "å†·æ¼ ", "ä¸å°Šé‡", "å¿½è¦–å°æ–¹çš„æ„Ÿå—"]},
    {"question": "æ„›æƒ…ä¸­ï¼Œä½ èªç‚ºè¦ªå¯†ã€æ¿€æƒ…å’Œæ‰¿è«¾å“ªå€‹æœ€é‡è¦?", "answers": ["è¦ªå¯†", "æ¿€æƒ…", "æ‰¿è«¾", "ä¸‰è€…åŒæ¨£é‡è¦"]},
    {"question": "ç•¶ä¼´ä¾¶ä¸å›è¨Šæ¯æ™‚ï¼Œä½ çš„ç¬¬ä¸€åæ‡‰æ˜¯ä»€éº¼?", "answers": ["æ„Ÿåˆ°è¢«å¿½è¦–", "è€å¿ƒç­‰å¾…", "å‡è£ä¸åœ¨æ„", "è¦ºå¾—å¾ˆå—å‚·"]},
    {"question": "ä½ è¦ºå¾—åœ¨é—œä¿‚ä¸­æœ€é‡è¦çš„æ˜¯ä»€éº¼?", "answers": ["ç©©å®šå’Œå®‰å…¨", "å¾—åˆ°æ›´å¤šé—œæ³¨", "ä¿æœ‰è‡ªç”±å’Œè·é›¢", "ç†è§£å½¼æ­¤çš„è¡Œç‚º"]},
    {"question": "å¦‚æœä½ å’Œä¼´ä¾¶åˆ†é–‹å¹¾å¤©ï¼Œä½ æœƒæœ‰ä»€éº¼æ„Ÿå—?", "answers": ["æ„Ÿåˆ°å¹³éœ", "é–‹å§‹æ“”å¿ƒå°æ–¹çš„æ…‹åº¦", "è¦ºå¾—è¼•é¬†", "æœ‰é»æ··äº‚å’Œä¸å®‰"]},
    {"question": "ç•¶ä¼´ä¾¶è¡¨ç¾å†·æ¼ æ™‚ï¼Œä½ æœƒæ€éº¼åæ‡‰?", "answers": ["è©¦è‘—æºé€š", "æ›´åŠ é»è‘—å°æ–¹", "é¸æ“‡ä¿æŒè·é›¢", "æ„Ÿåˆ°æƒ…ç·’å´©æ½°"]},
    {"question": "ä½ èªç‚ºä¼´ä¾¶çš„é—œæ³¨æ‡‰è©²å å¤šå¤§çš„æ¯”é‡?", "answers": ["å‰›å‰›å¥½ï¼Œå½¼æ­¤å¹³è¡¡", "è¶Šå¤šè¶Šå¥½", "ä¸éœ€è¦å¤ªå¤š", "å¾ˆé›£ç¢ºå®š"]},
    {"question": "ç•¶ä¼´ä¾¶éæ–¼è¦ªå¯†æ™‚ï¼Œä½ çš„æ„Ÿè¦ºæ˜¯ä»€éº¼?", "answers": ["å¾ˆé–‹å¿ƒ", "å¸Œæœ›å°æ–¹æ›´è¦ªå¯†", "æœ‰é»ä¸èˆ’æœ", "æ—¢æœŸå¾…åˆå®³æ€•"]},
    {"question": "å¦‚æœä¼´ä¾¶æå‡ºéœ€è¦æ›´å¤šç©ºé–“ï¼Œä½ æœƒæ€éº¼åš?", "answers": ["ç†è§£ä¸¦å°Šé‡", "æ„Ÿåˆ°ä¸å®‰ä¸¦å°‹æ±‚æ›´å¤šé—œæ³¨", "æ„Ÿåˆ°é¬†äº†ä¸€å£æ°£", "ä¸çŸ¥é“è©²æ€éº¼è™•ç†"]},
    {"question": "ä½ å¦‚ä½•çœ‹å¾…æ‰¿è«¾åœ¨é—œä¿‚ä¸­çš„ä½œç”¨?", "answers": ["å¿…è¦ä¸”ç©©å›º", "éœ€è¦ä¸æ–·è¢«è‚¯å®š", "å¯ä»¥é¸æ“‡æ€§æ‰¿è«¾", "è®“äººæ„Ÿåˆ°çŸ›ç›¾"]},
    {"question": "ç•¶ä½ è¦ºå¾—ä¼´ä¾¶å¿½ç•¥ä½ æ™‚ï¼Œä½ çš„æ‡‰å°æ–¹å¼æ˜¯ä»€éº¼?", "answers": ["è¡¨é”ä½ çš„æ„Ÿå—", "æ›´åŠ åŠªåŠ›å¼•èµ·æ³¨æ„", "å‡è£ä¸åœ¨ä¹", "è®Šå¾—æ›´å†·æ¼ "]},
    {"question": "ä½ è¦ºå¾—ä»€éº¼æ¨£çš„è¡Œç‚ºèƒ½å¢å¼·é—œä¿‚çš„å®‰å…¨æ„Ÿ?", "answers": ["ç©©å®šçš„æºé€š", "æ›´å¤šçš„é™ªä¼´", "çµ¦äºˆå°æ–¹è‡ªç”±", "å»ºç«‹æ¸…æ™°çš„ç•Œé™"]},
    {"question": "ä½ èªç‚ºéåº¦è¦ªå¯†çš„é—œä¿‚æœƒå¸¶ä¾†ä»€éº¼å½±éŸ¿?", "answers": ["ä¿ƒé€²æ„Ÿæƒ…ç™¼å±•", "è®“äººæ„Ÿåˆ°ä¸å®‰", "æ„Ÿåˆ°å£“åŠ›å¾ˆå¤§", "æƒ…ç·’è®Šå¾—è¤‡é›œ"]},
    {"question": "ç•¶ä¼´ä¾¶ä¸é¡˜åˆ†äº«ä»–çš„æƒ³æ³•æ™‚ï¼Œä½ æœƒæ€éº¼åæ‡‰?", "answers": ["è©¦è‘—è©¢å•åŸå› ", "æ“”å¿ƒé—œä¿‚æ˜¯å¦å‡ºå•é¡Œ", "çµ¦äºˆå°æ–¹æ™‚é–“å’Œç©ºé–“", "æ„Ÿåˆ°è¢«æ‹’çµ•å’Œå—å‚·"]},
    {"question": "ä½ èªç‚ºåœ¨è¦ªå¯†é—œä¿‚ä¸­ï¼Œä¿æŒç¨ç«‹çš„é‡è¦æ€§æ˜¯ä»€éº¼?", "answers": ["é©åº¦ç¨ç«‹æœ‰åŠ©æ–¼é—œä¿‚ç©©å®š", "è¦ºå¾—ç¨ç«‹æœƒç–é å½¼æ­¤", "éå¸¸é‡è¦ï¼Œé¿å…éåº¦ä¾è³´", "ç¨ç«‹å’Œè¦ªå¯†è®“äººé›£ä»¥æŠ‰æ“‡"]},
    {"question": "ç•¶ä¼´ä¾¶æœ‰å£“åŠ›æ™‚ï¼Œä½ æœƒæ€éº¼æ”¯æŒä»–?", "answers": ["æä¾›æƒ…æ„Ÿæ”¯æŒ", "æŒçºŒé—œæ³¨ä»–çš„ä¸€åˆ‡", "ä¿æŒè·é›¢ä»¥å…å¹²æ“¾", "è©¦åœ–æ‰¾æ©Ÿæœƒè§£æ±ºä»–çš„å•é¡Œ"]},
    {"question": "ä½ å¦‚ä½•çœ‹å¾…ã€åˆ†é–‹ä¸€æ®µæ™‚é–“å°æ„Ÿæƒ…æ˜¯å¦æœ‰ç›Šã€?", "answers": ["å¯ä»¥å¢å¼·å½¼æ­¤çš„ä¿¡ä»»", "æœƒè®“äººæ„Ÿåˆ°ç„¦æ…®", "èƒ½å¹«åŠ©å½¼æ­¤æ›´å†·éœ", "æ„Ÿåˆ°çŸ›ç›¾å’Œä¸å®‰"]},
    {"question": "ç•¶ä½ éœ€è¦å®‰æ…°æ™‚ï¼Œä½ æœƒå¸Œæœ›ä¼´ä¾¶æ€éº¼åš?", "answers": ["ä¸»å‹•é™ªä¼´", "è¡¨é”æ„›æ„å’Œæ”¯æŒ", "çµ¦æˆ‘ä¸€é»æ™‚é–“", "è®“æˆ‘è‡ªå·±è™•ç†æƒ…ç·’"]},
    {"question": "ä½ å¦‚ä½•è¡¨é”å°ä¼´ä¾¶çš„é—œæ„›?", "answers": ["é€šéç´°å¿ƒç…§é¡§å°æ–¹", "æŒçºŒè¡¨é”å°ä»–çš„ä¾è³´", "å°Šé‡ä»–çš„å€‹äººç©ºé–“", "ä¸æ™‚çµ¦äºˆé©šå–œå’Œæ‰¿è«¾"]},
    {"question": "ä½ èªç‚ºé€ƒé¿å‹äººæ ¼åœ¨æˆ€æ„›ä¸­æœ€å¤§çš„æŒ‘æˆ°æ˜¯ä»€éº¼?", "answers": ["å»ºç«‹è¦ªå¯†é—œä¿‚", "æ¥å—ä¼´ä¾¶çš„é—œæ³¨", "ç¶­æŒç¨ç«‹æ€§", "ç†è§£è‡ªå·±çš„æƒ…æ„Ÿéœ€æ±‚"]},
    {"question": "ä½ è¦ºå¾—ä»€éº¼æƒ…æ³æœ€èƒ½ç ´å£ä¸€æ®µé—œä¿‚?", "answers": ["ä¿¡ä»»çš„ç¼ºå¤±", "å®‰å…¨æ„Ÿçš„ä¸è¶³", "éåº¦è¦ªå¯†æˆ–ç–é ", "åè¦†ç„¡å¸¸çš„è¡Œç‚º"]},
    {"question": "ä½ èªç‚ºæ„›æƒ…ä¸­æœ€é‡è¦çš„å¹³è¡¡æ˜¯ä»€éº¼?", "answers": ["è¦ªå¯†èˆ‡ç¨ç«‹", "æ¿€æƒ…èˆ‡ç†æ€§", "æ‰¿è«¾èˆ‡è‡ªç”±", "å®‰å…¨æ„Ÿèˆ‡æŒ‘æˆ°"]},
    {"question": "ç•¶ä½ å’Œä¼´ä¾¶ç´„æœƒæ™‚ï¼Œä½ æ›´å‚¾å‘æ–¼åšä»€éº¼ï¼Ÿ", "answers": ["å’Œä»–ä¸€èµ·åƒåŠ èšæœƒ", "åœ¨å®¶å®‰éœåœ°èŠå¤©", "è¨ˆåŠƒä¸€å€‹å†’éšªæ—…è¡Œ", "å˜—è©¦ä»–å–œæ­¡çš„æ´»å‹•"]},
    {"question": "å¦‚æœä¼´ä¾¶å¿˜è¨˜äº†ä¸€å€‹é‡è¦çš„ç´€å¿µæ—¥ï¼Œä½ æœƒå¦‚ä½•åæ‡‰ï¼Ÿ","answers": ["ç†æ€§åœ°å’Œä»–è¨è«–é€™ä»¶äº‹", "æ„Ÿåˆ°å—å‚·æƒ³è¦ä»–çš„é“æ­‰", "å¿½ç•¥é€™ä»¶äº‹", "æœŸå¾…æœªä¾†ä¸æœƒå†ç™¼ç”Ÿ"]},
    {"question": "ä½ èªç‚ºæ„›æƒ…ä¸­æœ€é‡è¦çš„ç‰¹è³ªæ˜¯ä»€éº¼ï¼Ÿ","answers": ["å½¼æ­¤åˆ†äº«ç”Ÿæ´»çš„ç´°ç¯€", "å…±åŒåˆ¶å®šæœªä¾†è¨ˆåŠƒ", "ç¶­æŒç©©å®šçš„æƒ…æ„Ÿé€£çµ", "è§£æ±ºå•é¡Œçš„èƒ½åŠ›"]},
    {"question": "ä½ å¦‚ä½•è™•ç†èˆ‡ä¼´ä¾¶çš„åˆ†æ­§ï¼Ÿ","answers": ["ä»¥å†·éœçš„æ–¹å¼é€²è¡Œè¨è«–", "å„ªå…ˆè€ƒæ…®å°æ–¹çš„æ„Ÿå—", "å°‹æ±‚éˆæ´»è§£æ±ºæ–¹æ³•", "è¨­å®šè¦å‰‡é¿å…æœªä¾†é‡è¤‡"]},
    {"question": "ç•¶ä¼´ä¾¶éœ€è¦ç©ºé–“æ™‚ï¼Œä½ æœƒæ€éº¼åšï¼Ÿ","answers": ["çµ¦äºˆä»–è¶³å¤ çš„ç©ºé–“", "è©¦åœ–æ‰¾æ™‚é–“å’Œä»–æºé€š", "è€å¿ƒç­‰å¾…ï¼Œå°ˆæ³¨è‡ªå·±", "ä¸æ–·æƒ³è‘—ä»–æ˜¯å¦ä¸æ„›æˆ‘äº†"]},
    {"question": "ä½ èªç‚ºå¦‚ä½•è®“ä¸€æ®µæ„Ÿæƒ…ä¿æŒæ¿€æƒ…ï¼Ÿ","answers": ["è¨ˆåŠƒæµªæ¼«çš„é©šå–œ", "å˜—è©¦æ–°çš„ç´„æœƒæ´»å‹•", "ç¶“å¸¸äº¤æµå½¼æ­¤çš„éœ€æ±‚", "ä¿æŒå€‹äººç©ºé–“ä»¥å¢åŠ å¸å¼•åŠ›"]},
    {"question": "å¦‚æœä½ éœ€è¦å°ä¸€æ®µæ„Ÿæƒ…åšå‡ºé•·æœŸæ‰¿è«¾ï¼Œä½ æœƒæ€éº¼è€ƒæ…®ï¼Ÿ","answers": ["åˆ¶å®šä¸€å€‹ç©©å®šçš„æœªä¾†è¨ˆåŠƒ", "è§€å¯Ÿå½¼æ­¤æ˜¯å¦æœ‰å…±åŒçš„åƒ¹å€¼è§€", "æ ¹æ“šç›´è¦ºå’Œæ„Ÿè¦ºåšæ±ºå®š", "è€ƒæ…®å¦‚ä½•å¹³è¡¡è‡ªå·±çš„è‡ªç”±å’Œé—œä¿‚"]},
    {"question": "ä½ æœ€æ“…é•·è¡¨é”æ„›æ„çš„æ–¹å¼æ˜¯ä»€éº¼ï¼Ÿ", "answers": ["è¡Œå‹•ä¸Šæ”¯æŒå°æ–¹", "æµªæ¼«çš„èªè¨€è¡¨é”", "ç­–åŠƒé©šå–œæˆ–æ—…è¡Œ", "ç´°å¿ƒç•™æ„å°æ–¹çš„éœ€æ±‚"]},
    {"question": "ç•¶ä½ å’Œä¼´ä¾¶ç™¼ç”Ÿçˆ­åŸ·æ™‚ï¼Œæœ€å¯èƒ½çš„åŸå› æ˜¯ä»€éº¼ï¼Ÿ", "answers": ["å°æœªä¾†è¨ˆåŠƒçš„ä¸åŒçœ‹æ³•","å°æŸä»¶äº‹è™•ç†æ–¹å¼çš„åˆ†æ­§", "ç¼ºä¹è¶³å¤ çš„é™ªä¼´", "éæ–¼æ³¨é‡å€‹äººç©ºé–“"]},
    {"question": "ä½ æœ€ç†æƒ³çš„ä¼´ä¾¶é¡å‹æ˜¯ä»€éº¼æ¨£çš„ï¼Ÿ","answers": ["èƒ½èˆ‡æˆ‘è¨è«–æ·±å±¤å•é¡Œçš„", "é¡˜æ„å°Šé‡æˆ‘çš„è‡ªç”±çš„", "èƒ½å’Œæˆ‘åˆ†äº«ç”Ÿæ´»å°äº‹çš„", "ç¸½èƒ½åœ¨æƒ…ç·’ä¸Šæ”¯æŒæˆ‘çš„"]},
    {"question": "å¦‚æœä¼´ä¾¶ç”Ÿæ—¥å¿«åˆ°äº†ï¼Œä½ æœƒæ€éº¼åšï¼Ÿ","answers": ["æå‰æº–å‚™é©šå–œæ´¾å°","è²·å€‹å¯¦ç”¨çš„ç¦®ç‰©","æ‰‹å¯«ä¸€å°æ„Ÿäººçš„ä¿¡","åªæ˜¯å£é ­èªªç”Ÿæ—¥å¿«æ¨‚"]},
    {"question": "å¦‚æœä¼´ä¾¶ä¸é–‹å¿ƒï¼Œä½ æœƒæ€éº¼å®‰æ…°ä»–/å¥¹ï¼Ÿ","answers": ["å¸¶ä»–/å¥¹å»åƒå¥½åƒçš„","é™ªä»–/å¥¹éœéœåœ°å¾…è‘—","ç›´æ¥å•æ¸…æ¥šå•é¡Œæ‰€åœ¨","çµ¦å°æ–¹ç©ºé–“è‡ªå·±è™•ç†"]},
    {"question": "ä½ å€‘ç´„æœƒæ™‚ï¼Œå°æ–¹é²åˆ°äº†åŠå°æ™‚ï¼Œæœƒæ€éº¼åæ‡‰ï¼Ÿ","answers": ["é–‹ç©ç¬‘èª¿ä¾ƒå°æ–¹","è¡¨ç¤ºç†è§£ï¼Œä½†å¿ƒè£¡æœ‰é»ä¸é«˜èˆˆ","ç•¶é¢ç”Ÿæ°£æ‰¹è©•","ä¹¾è„†è‡ªå·±é›¢é–‹"]},
    {"question": "ç•¶ä¼´ä¾¶å’Œç•°æ€§æœ‹å‹å–®ç¨å‡ºå»ï¼Œä½ çš„æ„Ÿè¦ºæ˜¯ï¼Ÿ","answers": ["å®Œå…¨ä¿¡ä»»ï¼Œæ²’å•é¡Œ","å¿ƒè£¡æœƒæœ‰é»ä¸å®‰","è¦æ±‚å ±å‚™ç´°ç¯€","åš´æ ¼ç¦æ­¢"]},
    {"question": "å¦‚æœä¼´ä¾¶æ²’ä¸»å‹•å›è¦†ä½ çš„è¨Šæ¯ï¼Œä½ æœƒæ€éº¼æƒ³ï¼Ÿ","answers": ["å°æ–¹å¯èƒ½å¾ˆå¿™","é–‹å§‹æ‡·ç–‘ä»–/å¥¹çš„è¡Œè¹¤","è¦ºå¾—ä»–/å¥¹å¯èƒ½å°ä½ å†·æ·¡äº†","ç„¡æ‰€è¬‚ï¼Œå›å°±å›ï¼Œä¸å›å°±ç®—äº†"]},
    {"question": "åœ¨æˆ€æ„›ä¸­ï¼Œä½ èªç‚ºæœ€é‡è¦çš„æ˜¯ï¼Ÿ","answers": ["ç›¸äº’ä¿¡ä»»","ç‰©è³ªåŸºç¤","å…±åŒèˆˆè¶£","å¤–è²Œå¸å¼•"]},
    {"question": "å¦‚æœè¦æŒ‘é¸çµå©šå°è±¡ï¼Œé¦–è¦æ¢ä»¶æ˜¯ï¼Ÿ","answers": ["æ„Ÿæƒ…ç©©å®š","ç¶“æ¿Ÿå¯¦åŠ›","å®¶åº­èƒŒæ™¯","å¤–åœ¨æ¢ä»¶"]},
    {"question": "ç•¶ä¼´ä¾¶é‡åˆ°å›°é›£æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["å…¨åŠ›æ”¯æŒ","æä¾›å¯¦éš›å»ºè­°","çœ‹å°æ–¹éœ€è¦ä»€éº¼å†è¡Œå‹•","åªåœ¨å¿…è¦æ™‚å¹«å¿™"]},
    {"question": "ä½ èªç‚ºæˆ€æ„›ä¸­çš„çˆ­åµæ‡‰è©²å¦‚ä½•è™•ç†ï¼Ÿ","answers": ["ç•¶ä¸‹è§£æ±º","å†·éœä¸€æ®µæ™‚é–“å†æºé€š","ä¸€æ–¹å¦¥å”","è¦ºå¾—çˆ­åµæ˜¯æ²’å¿…è¦çš„"]},
    {"question": "ä½ è¦ºå¾—æ„›æƒ…çš„æœ€ä½³ç‹€æ…‹æ˜¯ä»€éº¼ï¼Ÿ","answers": ["æ¿€æƒ…å››æº¢","å¹³æ·¡è€Œç©©å®š","æ¯å¤©éƒ½æœ‰æ–°é®®æ„Ÿ","é›™æ–¹ç¨ç«‹ä½†äº’ç›¸é—œå¿ƒ"]},
    {"question": "å¦‚æœä½ ç™¼ç¾ä¼´ä¾¶æœ‰ä¸å¯å‘Šäººçš„ç§˜å¯†ï¼Œä½ æœƒï¼Ÿ","answers": ["ç•¶é¢è³ªå•","æ…¢æ…¢è©¦æ¢çœŸç›¸","å‡è£ä¸çŸ¥é“","ç›´æ¥åˆ†æ‰‹"]},
    {"question": "å¦‚æœä¼´ä¾¶æå‡ºçŸ­æš«åˆ†é–‹å†·éœä¸€ä¸‹ï¼Œä½ æœƒï¼Ÿ","answers": ["å®Œå…¨æ¥å—ä¸¦æ”¯æŒ","è©¦åœ–æŒ½ç•™","è¦ºå¾—é€™æ˜¯åˆ†æ‰‹çš„å¾µå…†","ä¸åŒæ„ï¼Œè¦æ±‚é¢å°é¢è§£æ±º"]},
    {"question": "å¦‚æœå°æ–¹è¦æ±‚ä½ æ”¾æ£„æŸå€‹æ„›å¥½ï¼Œä½ æœƒï¼Ÿ","answers": ["ç‚ºäº†ä»–/å¥¹æ”¾æ£„","å˜—è©¦å¦¥å”","å …æŒè‡ªå·±çš„é¸æ“‡","è¦ºå¾—é€™æ®µé—œä¿‚æœ‰å•é¡Œ"]},
    {"question": "å¦‚æœä½ çš„å®¶äººä¸å–œæ­¡ä½ çš„ä¼´ä¾¶ï¼Œä½ æœƒæ€éº¼è¾¦ï¼Ÿ","answers": ["èªªæœå®¶äººæ¥å—","æ…¢æ…¢è§€å¯Ÿå†æ±ºå®š","é †å¾å®¶äººæ„è¦‹","å®Œå…¨ä¸ç†æœƒå®¶äººçš„çœ‹æ³•"]},
    {"question": "ç•¶ä¼´ä¾¶æœ‰åš´é‡ç¼ºé»æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["è©¦è‘—å¹«ä»–/å¥¹æ”¹è®Š","åŒ…å®¹ä¸¦æ¥å—","æš—ä¸­è§€å¯Ÿæ˜¯å¦å½±éŸ¿æ„Ÿæƒ…","ç„¡æ³•å¿å—ï¼Œç›´æ¥åˆ†æ‰‹"]},
    {"question": "å¦‚æœå¯ä»¥å®‰æ’ä¸€æ¬¡ç´„æœƒï¼Œä½ æœƒé¸æ“‡ï¼Ÿ","answers": ["çœ‹ä¸€å ´é›»å½±","å»ä¸»é¡Œæ¨‚åœ’","ä¸€èµ·åšé£¯","éœéœåœ°çœ‹æ›¸æˆ–è½éŸ³æ¨‚"]},
    {"question": "ä½ å€‘åœ¨ä¸€èµ·æ™‚ï¼Œæœ€å–œæ­¡åšçš„äº‹æƒ…æ˜¯ï¼Ÿ","answers": ["ä¸€èµ·åƒæ±è¥¿","èŠå¤©åˆ†äº«ç”Ÿæ´»","å‡ºå»æ—…è¡Œ","ç©éŠæˆ²æˆ–çœ‹å½±é›†"]},
    {"question": "åœ¨æˆ€æ„›ä¸­ï¼Œä½ è¦ºå¾—è‡ªå·±çš„è§’è‰²æ¯”è¼ƒåƒï¼Ÿ","answers": ["ç…§é¡§è€…","è¢«ç…§é¡§è€…","å¹³ç­‰å¤¥ä¼´","é ˜å°è€…"]},
    {"question": "å¦‚æœå’Œä¼´ä¾¶ä¸€èµ·é¤Šå¯µç‰©ï¼Œä½ å¸Œæœ›é¤Šä»€éº¼ï¼Ÿ","answers": ["ç‹—","è²“","é­šæˆ–çˆ¬èŸ²é¡","å…¶ä»–"]},
    {"question": "å¦‚æœä½ å€‘è¦ä¸€èµ·é–‹è»Šæ—…è¡Œï¼Œä½ æœƒé¸æ“‡å“ªæ¢è·¯ç·šï¼Ÿ","answers": ["æµ·é‚Šå…¬è·¯","å±±å€å°é“","å¤§åŸå¸‚è§€å…‰","é„‰æ‘é¢¨å…‰"]},
    {"question": "å¦‚æœä¼´ä¾¶åœ¨ç¤¾ç¾¤åª’é«”ä¸Šè·Ÿç•°æ€§äº’å‹•é »ç¹ï¼Œä½ æœƒï¼Ÿ","answers": ["è¦ºå¾—ç„¡æ‰€è¬‚","ç§ä¸‹è¡¨é”è‡ªå·±çš„ä¸å®‰","è¦æ±‚æ¸›å°‘é€™ç¨®äº’å‹•","ç›´æ¥è³ªå•å°æ–¹"]},
    {"question": "ç•¶ä¼´ä¾¶çš„æœ‹å‹å°ä½ æ…‹åº¦ä¸å¥½æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["è·Ÿä¼´ä¾¶åæ˜ æƒ…æ³","å˜—è©¦å’Œæœ‹å‹å’Œè§£","é¸æ“‡å¿è€","å¸Œæœ›ä¼´ä¾¶æ¸›å°‘èˆ‡é€™äº›æœ‹å‹çš„ä¾†å¾€"]},
    {"question": "ä¼´ä¾¶å› ç‚ºå·¥ä½œç¹å¿™å¿˜è¨˜é‡è¦ç´€å¿µæ—¥ï¼Œä½ æœƒï¼Ÿ","answers": ["è¡¨ç¤ºç†è§£ï¼Œè‡ªå·±è™•ç†","æé†’ä»–/å¥¹æ³¨æ„é€™é¡äº‹æƒ…","æ„Ÿåˆ°ä¸è¢«é‡è¦–ä¸¦ç”Ÿæ°£","ç•¶å¤©ä¸æï¼Œä½†è¨˜åœ¨å¿ƒè£¡"]},
    {"question": "å¦‚æœä½ ç™¼ç¾ä¼´ä¾¶æœ‰è¼•å¾®èªªè¬Šç¿’æ…£ï¼Œä½†ä¸æ˜¯é‡å¤§äº‹æƒ…ï¼Œä½ æœƒï¼Ÿ","answers": ["å®Œå…¨åŒ…å®¹","è·Ÿå°æ–¹å¥½å¥½è«‡è«‡","åš´è‚…å°å¾…ï¼Œè¦æ±‚æ”¹æ­£","é€æ¼¸å°é€™æ®µæ„Ÿæƒ…å¤±å»ä¿¡å¿ƒ"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶è¢«å‰ä»»è¯çµ¡ï¼Œä½ æœƒæ€éº¼çœ‹å¾…ï¼Ÿ","answers": ["è¦ºå¾—å¾ˆæ­£å¸¸","è¦æ±‚ä¼´ä¾¶ä¿æŒè·é›¢","å…§å¿ƒä¸å®‰ä½†ä¸è¡¨ç¾å‡ºä¾†","å®Œå…¨ç„¡æ³•æ¥å—"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶æå‡ºå…©äººä¸€èµ·å­¸ç¿’æ–°æŠ€èƒ½ï¼Œä½ æœƒé¸æ“‡ä»€éº¼ï¼Ÿ","answers": ["å­¸åšæ–™ç†","ä¸€èµ·é‹å‹•å¥èº«","å­¸ç¿’ä¸€é–€æ–°èªè¨€","å­¸ç¿’éŸ³æ¨‚æˆ–èˆè¹ˆ"]},
    {"question": "ç•¶ä¼´ä¾¶åœ¨å…¬é–‹å ´åˆå°ä½ è¡¨ç¾å†·æ·¡æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["ç•¶å ´è©¢å•åŸå› ","å›å®¶å¾Œå†è¨è«–","è£ä½œä¸åœ¨æ„","è¦ºå¾—å¾ˆå—å‚·"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶å¿½ç„¶è¨ˆç•«æ”¹è®Šæœªä¾†ç”Ÿæ´»æ–¹å‘ï¼Œä½ æœƒï¼Ÿ","answers": ["å…¨åŠ›æ”¯æŒ","è©¦è‘—èªªæœä»–/å¥¹æ”¹è®Šä¸»æ„","ä¸€èµ·æ¢è¨å¯èƒ½æ€§","è¦ºå¾—å°æ–¹å¤ªè‡ªç§"]},
    {"question": "åœ¨æˆ€æ„›ä¸­ï¼Œä½ æ›´å¸Œæœ›ä¼´ä¾¶çµ¦ä½ ä»€éº¼æ¨£çš„æ”¯æŒï¼Ÿ","answers": ["ç²¾ç¥ä¸Šçš„é¼“å‹µ","å¯¦éš›è¡Œå‹•çš„å¹«åŠ©","æƒ…ç·’ä¸Šçš„å®‰æ…°","å½¼æ­¤ç¨ç«‹ä½†ä¿¡ä»»"]},
    {"question": "ä½ å°å…¬é–‹å±•ç¤ºè¦ªå¯†è¡Œç‚ºçš„çœ‹æ³•æ˜¯ï¼Ÿ","answers": ["è‡ªç„¶éš¨æ„","èƒ½æ¥å—ä½†ä¸å¤š","ä¸å–œæ­¡","å®Œå…¨ä¸èƒ½æ¥å—"]},
    {"question": "å¦‚æœä¼´ä¾¶çªç„¶æƒ³æ¬åˆ°å¦ä¸€å€‹åŸå¸‚ç”Ÿæ´»ï¼Œä½ æœƒï¼Ÿ","answers": ["æ¯«ä¸çŒ¶è±«è·Ÿéš¨","ä¸€èµ·è¨è«–æ˜¯å¦é©åˆ","å¸Œæœ›ä»–/å¥¹æ”¾æ£„","è€ƒæ…®åˆ†æ‰‹"]},
    {"question": "å¦‚æœä¼´ä¾¶é–‹å§‹å°æŸä»¶äº‹æƒ…ç‰¹åˆ¥è‘—è¿·ï¼Œä½ æœƒï¼Ÿ","answers": ["ä¸€èµ·åƒèˆ‡å…¶ä¸­","è¡¨ç¤ºæ”¯æŒä½†ä¸åƒèˆ‡","å˜—è©¦è®“ä»–/å¥¹åˆ†æ•£æ³¨æ„","æ„Ÿåˆ°ç–é "]},
    {"question": "ä½ å°å©šå§»çš„æ…‹åº¦æ˜¯ä»€éº¼ï¼Ÿ","answers": ["éå¸¸æœŸå¾…","å¯ä»¥è€ƒæ…®ï¼Œä½†ä¸æ€¥","å¯æœ‰å¯ç„¡","å®Œå…¨ä¸è€ƒæ…®"]},
    {"question": "å¦‚æœä¼´ä¾¶åœ¨å¤–é‡åˆ°éº»ç…©ï¼Œä½ æœƒï¼Ÿ","answers": ["ç«‹åˆ»è¶•å»å¹«å¿™","æä¾›å»ºè­°ä½†ä¸è¦ªè‡ªåƒèˆ‡","è®“ä»–/å¥¹è‡ªå·±è§£æ±º","è¦–æƒ…æ³è€Œå®š"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶æœ‰ç¶“æ¿Ÿå›°é›£ï¼Œä½ æœƒï¼Ÿ","answers": ["ä¸»å‹•æä¾›è²¡å‹™å¹«åŠ©","å¹«åŠ©ä»–/å¥¹è¦åŠƒè²¡å‹™","æƒ…æ„Ÿä¸Šæ”¯æŒï¼Œä½†ä¸æä¾›é‡‘éŒ¢","å»ºè­°ä»–/å¥¹å°‹æ±‚å…¶ä»–æ–¹æ³•"]},
    {"question": "ä½ æ›´å–œæ­¡èˆ‡ä¼´ä¾¶ä¸€èµ·å»å“ªç¨®æ—…è¡Œï¼Ÿ","answers": ["è±ªè¯åº¦å‡æ‘","èƒŒåŒ…å®¢è‡ªåŠ©æ—…è¡Œ","æ–‡åŒ–æ¢ç´¢ä¹‹æ—…","çŸ­é€”ä¼‘é–’æ—…è¡Œ"]},
    {"question": "ç•¶ä¼´ä¾¶æå‡ºçµæŸé—œä¿‚æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["å˜—è©¦æŒ½å›","å¸Œæœ›å°æ–¹è§£é‡‹åŸå› ","æ¥å—ä¸¦ç¥ç¦å°æ–¹","ç«‹åˆ»åˆ‡æ–·æ‰€æœ‰è¯ç¹«"]},
    {"question": "å¦‚æœä¼´ä¾¶ç¶“å¸¸å’Œæœ‹å‹èšæœƒï¼Œä½ æœƒï¼Ÿ","answers": ["å®Œå…¨æ”¯æŒ","å¸Œæœ›ä»–/å¥¹åˆ†å‡ºæ›´å¤šæ™‚é–“é™ªä½ ","è¦ºå¾—ä»–/å¥¹å¿½ç•¥äº†ä½ ","é€æ¼¸ç–é å°æ–¹"]},
    {"question": "ä½ èªç‚ºå…©äººç›¸è™•æ™‚ï¼Œæœ€å¥½çš„æºé€šæ–¹å¼æ˜¯ï¼Ÿ","answers": ["ç›´æ¥è¡¨é”å¿ƒæƒ…","å¾ªåºæ¼¸é€²æºé€š","å…ˆè§€å¯Ÿå°æ–¹çš„æ…‹åº¦","é¿å…è«‡è«–æ•æ„Ÿè©±é¡Œ"]},
    {"question": "ä½ å¸Œæœ›ä¼´ä¾¶å°ä½ çš„æœ‹å‹è¡¨ç¾å¦‚ä½•ï¼Ÿ","answers": ["ç†±æƒ…ä¸»å‹•","é©åº¦å‹å¥½","ç¦®è²Œä½†ä¿æŒè·é›¢","å®Œå…¨ä¸éœ€è¦äº’å‹•"]},
    {"question": "å¦‚æœä¼´ä¾¶çš„æŸäº›è¡Œç‚ºè®“ä½ ä¸æ»¿ï¼Œä½ æœƒï¼Ÿ","answers": ["ç›´æ¥å‘Šè¨´ä»–/å¥¹","è§€å¯Ÿä¸€æ®µæ™‚é–“å†èªª","ä¸æä½†å¿ƒè£¡è¨˜ä½","é»˜é»˜æ”¹è®Šè‡ªå·±çš„æ…‹åº¦"]},
    {"question": "ä½ å¸Œæœ›èˆ‡ä¼´ä¾¶éå“ªç¨®ç¯€æ—¥æ…¶ç¥æ–¹å¼ï¼Ÿ","answers": ["å¤§å‹èšæœƒ","å®‰éœçš„å…©äººæ™‚å…‰","èˆ‡å®¶äººæœ‹å‹ä¸€èµ·æ…¶ç¥","ä¸éœ€è¦ç‰¹åˆ¥æ…¶ç¥"]},
    {"question": "ç•¶ä¼´ä¾¶å·¥ä½œå£“åŠ›å¾ˆå¤§æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["å¹«ä»–/å¥¹åˆ†æ“”ä¸€äº›äº‹æƒ…","é¼“å‹µå°æ–¹èª¿æ•´ç‹€æ…‹","å»ºè­°ä»–/å¥¹ä¼‘å‡","é™ªä¼´ä½†ä¸å¹²æ¶‰"]},
    {"question": "å¦‚æœä¼´ä¾¶å°ä½ çš„å¤–è¡¨æå‡ºå»ºè­°ï¼Œä½ æœƒï¼Ÿ","answers": ["æ¬£ç„¶æ¥å—ä¸¦æ”¹è®Š","æ¥å—ä½†æœ‰é¸æ“‡æ€§èª¿æ•´","è¦ºå¾—è¢«å†’çŠ¯","ç›´æ¥æ‹’çµ•"]},
    {"question": "ç•¶ä½ å€‘æ„è¦‹ä¸åˆæ™‚ï¼Œé€šå¸¸æœƒæ€éº¼è™•ç†ï¼Ÿ","answers": ["å†·éœæºé€šæ‰¾åˆ°æŠ˜è¡·æ–¹æ¡ˆ","æš«æ™‚æ“±ç½®ï¼Œç¨å¾Œå†è¨è«–","ä¸€æ–¹è®“æ­¥","é¸æ“‡å¿½ç•¥å•é¡Œ"]},
    {"question": "å¦‚æœä¼´ä¾¶è¦æ±‚ä½ å˜—è©¦ä¸€äº›æ–°äº‹ç‰©ï¼Œä½†ä½ ä¸å–œæ­¡ï¼Œä½ æœƒï¼Ÿ","answers": ["å˜—è©¦ä½†å‘ŠçŸ¥å°æ–¹æ„Ÿå—","å©‰æ‹’ä¸¦è§£é‡‹åŸå› ","å¼·è¿«è‡ªå·±æ¥å—","ç›´æ¥æ‹’çµ•"]},
    {"question": "ç•¶ä½ æ„Ÿåˆ°å£“åŠ›æ™‚ï¼Œå¸Œæœ›ä¼´ä¾¶æ€éº¼åšï¼Ÿ","answers": ["ä¸»å‹•å®‰æ…°","å¹«å¿™è§£æ±ºå•é¡Œ","éœéœé™ªä¼´","è®“æˆ‘è‡ªå·±è™•ç†"]},
    {"question": "ç•¶ä½ èˆ‡ä¼´ä¾¶çš„æœ‹å‹æˆ–å®¶äººç›¸è™•ä¸æ„‰å¿«æ™‚ï¼Œä½ æœƒï¼Ÿ","answers": ["è©¦è‘—æ”¹å–„é—œä¿‚","è«‹ä¼´ä¾¶èª¿åœ","é¸æ“‡å°‘æ¥è§¸","ç›´æ¥å‘ä¼´ä¾¶è¡¨é”ä¸æ»¿"]},
    {"question": "ä½ èªç‚ºç†æƒ³çš„æˆ€æ„›æ™‚é•·æ˜¯å¤šä¹…ï¼Ÿ","answers": ["ä¸€å¹´ä»¥å…§","å…©åˆ°ä¸‰å¹´","äº”å¹´ä»¥ä¸Š","æ²’æœ‰æœŸé™ï¼Œé †å…¶è‡ªç„¶"]},
    {"question": "å¦‚æœä½ çš„ä¼´ä¾¶é–‹å§‹å°ä½ å†·æ·¡ï¼Œä½ æœƒï¼Ÿ","answers": ["ç©æ¥µæºé€šå°‹æ‰¾åŸå› ","çµ¦äºˆç©ºé–“å’Œæ™‚é–“","å˜—è©¦ç”¨è¡Œå‹•æŒ½å›","èªç‚ºæ„Ÿæƒ…å·²ç¶“çµæŸ"]}
]

responses = [
    "é€™æ˜¯ä¸€å€‹å¾ˆå¥½çš„é¸æ“‡ï¼",
    "é€™æ˜¯ä¸€ç¨®éå¸¸å¥åº·çš„æ–¹å¼ï¼",
    "é€™è½èµ·ä¾†ä¸éŒ¯ï¼Œå€¼å¾—å˜—è©¦ï¼",
    "çœŸçš„æ˜¯ä¸€å€‹å€¼å¾—æ·±æ€çš„é¸æ“‡ï¼",
]


# åˆ†å‰²é•·æ¶ˆæ¯çš„å‡½æ•¸
def split_message(message, chunk_size=2000):
    """å°‡é•·æ¶ˆæ¯åˆ†å‰²ç‚ºä¸è¶…é chunk_size çš„ç‰‡æ®µ"""
    return [message[i:i + chunk_size] for i in range(0, len(message), chunk_size)]

# ç•¶æ©Ÿå™¨äººå•Ÿå‹•æ™‚è§¸ç™¼
@bot.event
async def on_ready():
    slash = await bot.tree.sync()
    try:
        await bot.tree.sync()  # å°‡æ–œç·šæŒ‡ä»¤åŒæ­¥åˆ° Discord
        print(f"å·²ç™»å…¥ç‚º {bot.user} ä¸¦åŒæ­¥{len(slash)}å€‹æ–œç·šæŒ‡ä»¤ã€‚")
    except Exception as e:
        print(f"åŒæ­¥æ–œç·šæŒ‡ä»¤æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š{e}")

# OpenAI èŠå¤©åŠŸèƒ½
@bot.tree.command(name="èŠå¤©", description="openaièŠå¤©åŠŸèƒ½")
@app_commands.describe(prompt="è¼¸å…¥æ‚¨çš„å•é¡Œæˆ–å…§å®¹")
async def chat(interaction: discord.Interaction, prompt: str):
    """è™•ç†èŠå¤©åŠŸèƒ½çš„æ–œç·šæŒ‡ä»¤"""
    if not prompt.strip():
        await interaction.response.send_message("è«‹è¼¸å…¥æœ‰æ•ˆçš„å…§å®¹ï¼Œæˆ‘å¯ä»¥å¹«åŠ©æ‚¨è§£æ±ºæ„Ÿæƒ…ç›¸é—œå•é¡Œï¼", ephemeral=True)
        return
    
    await interaction.response.defer()  # å»¶é²å›æ‡‰

    try:
        # ä½¿ç”¨ OpenAI API ç”Ÿæˆå›æ‡‰
        response = openai.ChatCompletion.create(
            engine=DEPLOYMENT_NAME,  # Azure éƒ¨ç½²åç¨±
            messages=[
                {"role": "system", "content": "ä½ æ˜¯ä¸€å€‹æº«æš–ä¸”æœ‰åŒç†å¿ƒçš„æˆ€æ„›è«®è©¢å¸«ï¼Œå°ˆæ³¨æ–¼å¹«åŠ©è§£æ±ºæ„Ÿæƒ…å•é¡Œã€‚"},
                {"role": "user", "content": prompt},
            ],
            max_tokens=500  # å¯æ ¹æ“šéœ€è¦èª¿æ•´
        )

        response_text = response["choices"][0]["message"]["content"].strip()

        # å¦‚æœå›æ‡‰å…§å®¹éé•·ï¼Œåˆ†æ®µå›å‚³
        for chunk in split_message(response_text):
            await interaction.followup.send(chunk)

    except openai.error.RateLimitError:
        logger.error("è¶…é API é…é¡é™åˆ¶")
        await interaction.followup.send("æŠ±æ­‰ï¼Œç›®å‰è«‹æ±‚é‡éå¤šï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")
    except openai.error.OpenAIError as e:
        logger.error(f"OpenAI éŒ¯èª¤: {e}")
        await interaction.followup.send("æŠ±æ­‰ï¼Œæˆ‘æš«æ™‚ç„¡æ³•è™•ç†æ‚¨çš„è«‹æ±‚ã€‚")
    except Exception as e:
        logger.exception("æœªçŸ¥éŒ¯èª¤")
        await interaction.followup.send("ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚")


# å•Ÿå‹•æˆ€æ„›éŠæˆ²çš„å‘½ä»¤
@bot.tree.command(name="å•ç­”", description="æˆ€æ„›å¿«å•å¿«ç­”")
async def æˆ€æ„›éŠæˆ²(interaction: discord.Interaction):
    """å•Ÿå‹•æˆ€æ„›å°éŠæˆ²"""
    
    await interaction.response.send_message("æ­¡è¿ä¾†åˆ°æˆ€æ„›å¿«å•å¿«ç­”ï¼è®“æˆ‘å€‘é–‹å§‹å§ï¼è«‹è¼¸å…¥ä½ è¦å›ç­”çš„é¡Œæ•¸(å…±æœ‰118é¡Œ)")


    def check(msg):
        return msg.author == interaction.user and msg.channel == interaction.channel
    
    max_attempts = 3  # æœ€å¤§å˜—è©¦æ¬¡æ•¸
    attempts = 0

    while attempts < max_attempts:
        try:
            # ç­‰å¾…ç”¨æˆ¶è¼¸å…¥é¡Œæ•¸
            msg = await bot.wait_for('message', check=check, timeout=150)
            a = int(msg.content.strip())

            # æª¢æŸ¥é¡Œæ•¸æ˜¯å¦æœ‰æ•ˆ
            if 1 <= a <= len(questions):
                break  # è¼¸å…¥æ­£ç¢ºï¼Œè·³å‡ºå¾ªç’°
            else:
                await interaction.followup.send(f"é¡Œæ•¸å¿…é ˆåœ¨ 1 åˆ° {len(questions)} ä¹‹é–“ï¼Œè«‹é‡æ–°è¼¸å…¥ï¼")
        except asyncio.TimeoutError:
            await interaction.followup.send("è¶…æ™‚æœªå›æ‡‰ï¼ŒéŠæˆ²çµæŸï¼")
            return
        except ValueError:
            await interaction.followup.send("è«‹è¼¸å…¥æœ‰æ•ˆçš„æ•¸å­—ï¼")

        attempts += 1

    if attempts == max_attempts:
        await interaction.followup.send("å˜—è©¦æ¬¡æ•¸éå¤šï¼ŒéŠæˆ²çµæŸï¼")
        return
        
    # éš¨æ©ŸæŠ½å–å•é¡Œ
    selected_questions = random.sample(questions, a)
    await interaction.followup.send(f"å·²é¸æ“‡ {a} é¡Œï¼Œé–‹å§‹éŠæˆ²ï¼")
    
    score = 0
    for item in selected_questions:
        # é¡¯ç¤ºå•é¡ŒåŠé¸é …
        question = item["question"]
        options = "\n".join([f"{i + 1}. {answer}" for i, answer in enumerate(item["answers"])])
        question_message = f"{question}\n{options}"
        await interaction.followup.send(question_message)
        
        # ç­‰å¾…ç”¨æˆ¶å›ç­”
        def check(msg):
            return msg.author == interaction.user and msg.channel == interaction.channel
        
        try:
            msg = await bot.wait_for('message', check=check, timeout=20)  # ç­‰å¾…å¹¾ç§’
            answer = msg.content.strip()
            
            # æª¢æŸ¥ç©å®¶é¸æ“‡çš„ç­”æ¡ˆæ˜¯å¦åœ¨é¸é …ä¸­
            try:
                answer_index = int(answer) - 1
                if 0 <= answer_index < len(item["answers"]):
                    correct_answer = item["answers"][answer_index]
                    score += 1
                    await interaction.followup.send(random.choice(responses))
                else:
                    await interaction.followup.send("é€™ä¸æ˜¯æœ‰æ•ˆçš„é¸é …ï¼Œè«‹é‡æ–°é¸æ“‡ã€‚")
            except ValueError:
                await interaction.followup.send("è«‹è¼¸å…¥ä¸€å€‹æœ‰æ•ˆçš„æ•¸å­—é¸é …ã€‚")
        
        except Exception as e:
            await interaction.followup.send("æŠ±æ­‰ï¼Œæ™‚é–“éé•·ï¼Œæˆ‘å€‘ä¸èƒ½ç­‰å¾…äº†ï¼")
            break

    await interaction.followup.send(f"éŠæˆ²çµæŸï¼ä½ ç¸½å…±å¾—äº† {score}/{len(selected_questions)} åˆ†ï¼")
    if score == len(selected_questions):
        await interaction.followup.send("æ­å–œä½ ï¼ä½ æ˜¯æˆ€æ„›é”äººï¼")
    else:
        await interaction.followup.send("ä¸éŒ¯ï¼Œç¹¼çºŒåŠªåŠ›ï¼Œæˆç‚ºæˆ€æ„›é«˜æ‰‹ï¼")
    

# è¨˜éŒ„æƒ…ç·’
@bot.tree.command(name="è¨˜éŒ„æƒ…ç·’", description="è¨˜éŒ„æƒ…ç·’")
async def è¨˜éŒ„æƒ…ç·’(interaction: discord.Interaction):
    # å‰µå»ºä¸‹æ‹‰é¸å–®ä¸¦é¡¯ç¤º
    select = EmotionSelect()
    view = View()
    view.add_item(select)
    await interaction.response.send_message("è«‹é¸æ“‡ä½ çš„æƒ…ç·’ï¼š", view=view)

# æŸ¥çœ‹æƒ…ç·’æ—¥æ›†
@bot.tree.command(name="æŸ¥çœ‹æƒ…ç·’æ—¥æ›†", description="æŸ¥çœ‹æƒ…ç·’æ—¥æ›†")
async def æŸ¥çœ‹æƒ…ç·’æ—¥æ›†(interaction: discord.Interaction):
    user_id = str(interaction.user.id)
    c.execute('SELECT id, emotion, timestamp FROM emotions WHERE user_id = ?', (user_id,))
    records = c.fetchall()
    if not records:
        await interaction.response.send_message("ç›®å‰æ²’æœ‰ä»»ä½•æƒ…ç·’è¨˜éŒ„ï¼")
        return
    response = "ä½ çš„æƒ…ç·’è¨˜éŒ„å¦‚ä¸‹ï¼š\n"
    for record in records:
        timestamp = datetime.datetime.strptime(record[2], '%Y-%m-%d %H:%M')  # å‡è¨­æ˜¯é€™å€‹æ ¼å¼
        formatted_time = timestamp.strftime('%Y-%m-%d %H:%M')  # æ ¼å¼åŒ–ç‚ºï¼šYYYY-MM-DD HH:MM
        response += f"ç·¨è™Ÿï¼š{record[0]}ï¼Œæƒ…ç·’ï¼š{record[1]}ï¼Œæ™‚é–“ï¼š{formatted_time}\n"

        # å¦‚æœè¨Šæ¯é•·åº¦è¶…é Discord é™åˆ¶ï¼Œåˆ†æ‰¹ç™¼é€
        if len(response) > 2000:
            await interaction.response.send_message(response)
            response = ""  # æ¸…ç©ºå›æ‡‰ï¼Œç¹¼çºŒå¡«å……ä¸‹ä¸€æ‰¹è¨Šæ¯
    # ç™¼é€æœ€å¾Œä¸€éƒ¨åˆ†çš„è¨Šæ¯
    if response:
        await interaction.response.send_message(response)

# åˆªé™¤è¨˜éŒ„
@bot.tree.command(name="åˆªé™¤è¨˜éŒ„", description="åˆªé™¤æŒ‡å®šçš„è¨˜éŒ„")
@app_commands.describe(record_ids="è¦åˆªé™¤çš„è¨˜éŒ„ç·¨è™Ÿï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼Œä¾‹å¦‚:1 2 3")
async def åˆªé™¤è¨˜éŒ„(interaction: discord.Interaction, record_ids: str):
    try:
        # å°‡è¼¸å…¥çš„è¨˜éŒ„ ID å­—ä¸²åˆ†å‰²ç‚ºæ•´æ•¸åˆ—è¡¨
        record_ids_list = [int(id.strip()) for id in record_ids.split() if id.strip().isdigit()]
        if not record_ids_list:
            await interaction.response.send_message("è«‹æä¾›æœ‰æ•ˆçš„è¨˜éŒ„ç·¨è™Ÿï¼", ephemeral=True)
            return

        user_id = str(interaction.user.id)
        deleted_count = 0
        
        # å¾ªç’°åˆªé™¤æŒ‡å®šè¨˜éŒ„
        for record_id in record_ids_list:
            c.execute('SELECT * FROM emotions WHERE id = ? AND user_id = ?', (record_id, user_id))
            record = c.fetchone()

            if record:
                c.execute('DELETE FROM emotions WHERE id = ?', (record_id,))
                deleted_count += 1

        # é‡æ–°æ’åˆ—ç·¨è™Ÿ
        if deleted_count > 0:
            c.execute('SELECT id FROM emotions WHERE user_id = ? ORDER BY timestamp', (user_id,))
            records = c.fetchall()

            # ä¾æ¬¡æ›´æ–°è¨˜éŒ„çš„ id
            for new_id, (old_id,) in enumerate(records, start=1):
                c.execute('UPDATE emotions SET id = ? WHERE id = ?', (new_id, old_id))

        conn.commit()

        if deleted_count == 0:
            await interaction.response.send_message("æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„è¨˜éŒ„æˆ–è¨˜éŒ„ä¸å±¬æ–¼ä½ ï¼")
        else:
            await interaction.response.send_message(f"å·²æˆåŠŸåˆªé™¤ {deleted_count} æ¢æƒ…ç·’è¨˜éŒ„ï¼")

    except ValueError:
        await interaction.response.send_message("è«‹æä¾›æœ‰æ•ˆçš„è¨˜éŒ„ç·¨è™Ÿï¼Œä¸¦ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¾‹å¦‚:1 2 3", ephemeral=True)
    except Exception as e:
        await interaction.response.send_message("åˆªé™¤è¨˜éŒ„æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ï¼", ephemeral=True)
        print(f"éŒ¯èª¤: {e}")

# æŒ‰é€±åˆ†ææƒ…ç·’
@bot.tree.command(name="æ¯é€±åˆ†æ", description="é¡¯ç¤ºæœ¬é€±çš„æƒ…ç·’è¨˜éŒ„")
async def æ¯é€±åˆ†æ(interaction: discord.Interaction):
    user_id = str(interaction.user.id)
    today = datetime.datetime.now()
    start_of_week = today - datetime.timedelta(days=today.weekday())  # æœ¬é€±é€±ä¸€
    end_of_week = start_of_week + datetime.timedelta(days=6)  # æœ¬é€±é€±æ—¥

    # å°‡æ™‚é–“è¨­ç½®ç‚ºä¸€å¤©çš„é–‹å§‹å’ŒçµæŸ
    start_of_week = start_of_week.replace(hour=0, minute=0, second=0, microsecond=0)
    end_of_week = end_of_week.replace(hour=23, minute=59, second=59, microsecond=999999)

    # æŸ¥è©¢æœ¬é€±æƒ…ç·’è¨˜éŒ„
    c.execute('SELECT emotion FROM emotions WHERE user_id = ? AND timestamp BETWEEN ? AND ?', 
              (user_id, start_of_week, end_of_week))
    records = c.fetchall()

    if not records:
        await interaction.response.send_message("æœ¬é€±æ²’æœ‰è¨˜éŒ„ï¼")
        return

    # çµ±è¨ˆæƒ…ç·’
    emotions = [record[0] for record in records]
    emotion_counts = Counter(emotions)
    total_emotions = sum(emotion_counts.values())
    negative_emotions = sum(emotion_counts[emotion] for emotion in emotion_counts if emotion in ["æ‚²å‚·","æ†¤æ€’","ç„¦æ…®","ç–²å€¦","ç”Ÿæ°£","é›£é","EMO","æ†‚é¬±","æ“”å¿ƒ","ç…©æƒ±","ç…©èº","ç…©æ‚¶","è‹¦æƒ±","ç…©æ†‚","ç„¡èŠ"])
    summary = "\n".join([f"{emotion}: {count} æ¬¡" for emotion, count in emotion_counts.items()])

    response_message = f"æœ¬é€±æƒ…ç·’åˆ†æï¼š\n{summary}"

    # å¦‚æœè² é¢æƒ…ç·’è¶…éä¸€åŠï¼Œéš¨æ©Ÿé¸æ“‡é—œå¿ƒçš„è©±
    if negative_emotions > total_emotions / 2:
        caring_messages = [
            "æœ€è¿‘æ˜¯ä¸æ˜¯æœ‰é»ç´¯äº†ï¼Ÿè¨˜å¾—å¥½å¥½ä¼‘æ¯å“¦ï¼:smiling_face_with_3_hearts:",
            "ä¸€åˆ‡éƒ½æœƒå¥½èµ·ä¾†çš„ï¼Œæœ‰ä»€éº¼éœ€è¦å¹«åŠ©çš„å¯ä»¥å‘Šè¨´æˆ‘ï¼:smile:",
            "å³ä½¿ç”Ÿæ´»æœ‰æ™‚å¾ˆé›£ï¼Œä¹Ÿä¸è¦å¿˜äº†ç…§é¡§è‡ªå·±ï¼:hugging:",
            "è©¦è‘—æ‰¾äº›è®“è‡ªå·±é–‹å¿ƒçš„äº‹æƒ…åšå§ï¼:blush:"
        ]
        response_message += f"\n\nğŸ’¡ {random.choice(caring_messages)}"

    await interaction.response.send_message(response_message)

# è‡ªå®šç¾©å€é–“åˆ†ææƒ…ç·’
@bot.tree.command(name="åˆ†æå€é–“", description="é¡¯ç¤ºå€é–“å…§çš„æƒ…ç·’è¨˜éŒ„")
@app_commands.describe(start_date = "é–‹å§‹æ—¥æœŸ(æ ¼å¼:YYYY-MM-DD)", end_date = "çµæŸæ—¥æœŸ(æ ¼å¼:YYYY-MM-DD)")
async def åˆ†æå€é–“(interaction: discord.Interaction, start_date: str, end_date: str):
    user_id = str(interaction.user.id)
    
    # è§£æç”¨æˆ¶è¼¸å…¥çš„æ—¥æœŸ
    try:
        start_date = datetime.datetime.strptime(start_date, "%Y-%m-%d")
        end_date = datetime.datetime.strptime(end_date, "%Y-%m-%d")
    except ValueError:
        await interaction.response.send_message("æ—¥æœŸæ ¼å¼éŒ¯èª¤ï¼Œè«‹ä½¿ç”¨ YYYY-MM-DD æ ¼å¼ã€‚")
        return
    
    # ç¢ºä¿çµæŸæ—¥æœŸä¸æ—©æ–¼é–‹å§‹æ—¥æœŸ
    if end_date < start_date:
        await interaction.response.send_message("çµæŸæ—¥æœŸä¸èƒ½æ—©æ–¼é–‹å§‹æ—¥æœŸã€‚")
        return
    
    # è¨­ç½®æ™‚é–“ç¯„åœ
    start_date = start_date.replace(hour=0, minute=0, second=0, microsecond=0)
    end_date = end_date.replace(hour=23, minute=59, second=59, microsecond=999999)

    # æŸ¥è©¢å€é–“å…§çš„æƒ…ç·’è¨˜éŒ„
    c.execute('SELECT emotion FROM emotions WHERE user_id = ? AND timestamp BETWEEN ? AND ?', 
              (user_id, start_date, end_date))
    records = c.fetchall()

    if not records:
        # å¦‚æœæ²’æœ‰æƒ…ç·’è¨˜éŒ„ï¼Œç›´æ¥å›æ‡‰
        await interaction.response.send_message(f"{start_date.strftime('%Y-%m-%d')} åˆ° {end_date.strftime('%Y-%m-%d')} ä¹‹é–“æ²’æœ‰æƒ…ç·’è¨˜éŒ„ï¼")
        return

    # çµ±è¨ˆæƒ…ç·’
    emotions = [record[0] for record in records]
    emotion_counts = Counter(emotions)
    total_emotions = sum(emotion_counts.values())
    negative_emotions = sum(emotion_counts[emotion] for emotion in emotion_counts if emotion in ["æ‚²å‚·","æ†¤æ€’","ç„¦æ…®","ç–²å€¦","ç”Ÿæ°£","é›£é","EMO","æ†‚é¬±","æ“”å¿ƒ","ç…©æƒ±","ç…©èº","ç…©æ‚¶","è‹¦æƒ±","ç…©æ†‚","ç„¡èŠ"])
    summary = "\n".join([f"{emotion}: {count} æ¬¡" for emotion, count in emotion_counts.items()])

    await interaction.response.send_message(f"æƒ…ç·’åˆ†æ({start_date.strftime('%Y-%m-%d')} åˆ° {end_date.strftime('%Y-%m-%d')}):\n{summary}")

    # å¦‚æœè² é¢æƒ…ç·’è¶…éä¸€åŠï¼Œéš¨æ©Ÿé¸æ“‡é—œå¿ƒçš„è©±
    if negative_emotions > total_emotions / 2:
        caring_messages = [
            "æœ€è¿‘æ˜¯ä¸æ˜¯æœ‰é»ç´¯äº†ï¼Ÿè¨˜å¾—å¥½å¥½ä¼‘æ¯å“¦ï¼:smiling_face_with_3_hearts:",
            "ä¸€åˆ‡éƒ½æœƒå¥½èµ·ä¾†çš„ï¼Œæœ‰ä»€éº¼éœ€è¦å¹«åŠ©çš„å¯ä»¥å‘Šè¨´æˆ‘ï¼:smile:",
            "å³ä½¿ç”Ÿæ´»æœ‰æ™‚å¾ˆé›£ï¼Œä¹Ÿä¸è¦å¿˜äº†ç…§é¡§è‡ªå·±ï¼:hugging:",
            "è©¦è‘—æ‰¾äº›è®“è‡ªå·±é–‹å¿ƒçš„äº‹æƒ…åšå§ï¼:blush:"
        ]
        response_message += f"\n\nğŸ’¡ {random.choice(caring_messages)}"

    await interaction.response.send_message(response_message)

# å•Ÿå‹• Discord Bot
bot.run(DISCORD_TOKEN)